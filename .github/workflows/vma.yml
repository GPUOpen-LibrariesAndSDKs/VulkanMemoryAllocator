name: VMA

on:
    push:
    pull_request:
        branches:
            - master

jobs:
  ubuntu-cmake-install:
    runs-on: ubuntu-latest
    strategy:
      matrix:
          config: [ Debug, Release ]
    steps:
      - uses: actions/checkout@v3
      - uses: lukka/get-cmake@latest
      # https://github.com/humbletim/setup-vulkan-sdk
      - name: Prepare Vulkan SDK
        uses: humbletim/setup-vulkan-sdk@v1.2.0
        with:
          vulkan-query-version: 1.3.204.0
          vulkan-components: Vulkan-Headers, Vulkan-Loader
          vulkan-use-cache: true
      - name: Configure VMA
        run: cmake -S . -B build -G "Ninja" -D CMAKE_BUILD_TYPE=${{matrix.config}}
      - name: Build VMA
        run: cmake --build build
